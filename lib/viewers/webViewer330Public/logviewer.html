<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.10.3.custom.min.css">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-switch.css" rel="stylesheet">
    <link href="css/bootstrap-table.min.css" rel="stylesheet">
    <title>node330</title>
    <script type="text/javascript" src="js/head.js"></script>
    <script type="text/javascript">
        // Load our scripts
        head.js("js/underscore-min.js", "js/jquery-1.9.1.js", "js/jquery-ui-1.10.3.custom.min.js", "js/bootstrap.min.js", "js/bootstrap-table.min.js", function()
        {
            $(function() {

                $.getJSON( "/log", function( data ) {

                    // Convert all of our timestamps to local date/time
                    $.each( data, function( key, val ) {
                        var local_date = new Date(val.timestamp);
                        val.local_timestamp = local_date.toLocaleDateString() + " " + local_date.toLocaleTimeString();
                    });

                    data.reverse();

                    $('#log-table').bootstrapTable({
                        columns: [{
                            field: 'local_timestamp',
                            title: 'Date / Time'
                        }, {
                            field: 'level',
                            title: 'Level'
                        }, {
                            field: 'message',
                            title: 'Message'
                        }],
                        data: data,
                        pagination : true,
                        search : true
                    });
                });
            });
        });
    </script>
</head>
<body>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <table id="log-table" class="table-no-bordered"></table>
        </div>
    </div>
</div>
</body>
</html>
